<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– Build Other Images for Photon OS</title><link>/docs/installation-guide/building-images/build-other-images/</link><description>Recent content in Build Other Images for Photon OS on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs/installation-guide/building-images/build-other-images/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Building Cloud Images</title><link>/docs/installation-guide/building-images/build-other-images/build-cloud-images/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/installation-guide/building-images/build-other-images/build-cloud-images/</guid><description>
&lt;p>Perform the following steps to build the cloud images on Ubuntu:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Install the packages:&lt;/p>
&lt;pre>&lt;code>sudo apt-get -y install bison gawk g++ createrepo python-aptdaemon genisoimage texinfo python-requests libfuse-dev libssl-dev uuid-dev libreadline-dev kpartx git bc
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Get Docker:&lt;/p>
&lt;pre>&lt;code>wget -qO- https://get.docker.com/ | sh
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Install pip&lt;/p>
&lt;pre>&lt;code>sudo apt install python3-pip
pip3 install git+https://github.com/vmware/photon-os-installer.git
git clone https://github.com/vmware/photon.git
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;p>If you encounter an error for LOCALE when you run these commands, then export the following variables in the terminal:&lt;/p>
&lt;pre>&lt;code> `export LC_ALL=&amp;quot;en_US.UTF-8&amp;quot;`
&lt;/code>&lt;/pre>
&lt;p>&lt;code> export LC_CTYPE=&amp;quot;en_US.UTF-8&amp;quot;&lt;/code>&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>Clone`the Photon project:&lt;/p>
&lt;p>&lt;code>git clone https://github.com/vmware/photon.git&lt;/code>
&lt;code>cd $HOME/workspaces/photon&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make the cloud image for AMI.&lt;/p>
&lt;p>&lt;code>sudo make image IMG_NAME=ami&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make the cloud image for Azure.&lt;/p>
&lt;p>&lt;code>sudo make image IMG_NAME=azure&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make the cloud image for GCE.&lt;/p>
&lt;p>&lt;code>sudo make image IMG_NAME=gce&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Result&lt;/strong>&lt;/p>
&lt;p>This command first builds all RPMs corresponding to the SPEC files in your Photon repository and then builds a bootable ISO containing those RPMs.&lt;/p>
&lt;p>The RPMs thus built are stored under &lt;code>stage/RPMS/&lt;/code> directory within the repository, using the following directory hierarchy:&lt;/p>
&lt;pre>&lt;code>$HOME/workspaces/photon/stage/:
├──RPMS/:
├──noarch/*.noarch.rpm [Architecture-independent RPMs]
├──x86_64/*.x86_64.rpm [RPMs built for the x86-64 architecture]
├──aarch64/*.aarch64.rpm [RPMs built for the aarch64 (ARM64) architecture]
&lt;/code>&lt;/pre>&lt;p>The cloud image is created at `$HOME/workspaces/photon.&lt;/p></description></item><item><title>Docs: Building OVA image</title><link>/docs/installation-guide/building-images/build-other-images/build-ova/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/installation-guide/building-images/build-other-images/build-ova/</guid><description>
&lt;p>Perform the following steps to build OVA on Ubuntu:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Install the packages:&lt;/p>
&lt;pre>&lt;code>sudo apt-get -y install bison gawk g++ createrepo python-aptdaemon genisoimage texinfo python-requests libfuse-dev libssl-dev uuid-dev libreadline-dev kpartx git bc
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Get Docker:&lt;/p>
&lt;pre>&lt;code>wget -qO- https://get.docker.com/ | sh
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Install pip&lt;/p>
&lt;pre>&lt;code>sudo apt install python3-pip
pip3 install git+https://github.com/vmware/photon-os-installer.git
git clone https://github.com/vmware/photon.git
If you encounter an error for LOCALE when you run these commands, then export the following variables in the terminal:
export LC_ALL=&amp;quot;en_US.UTF-8&amp;quot;
`export LC_CTYPE=&amp;quot;en_US.UTF-8&amp;quot;`
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Clone the Photon project:&lt;/p>
&lt;pre>&lt;code>git clone https://github.com/vmware/photon.git
&lt;/code>&lt;/pre>
&lt;p>&lt;code>cd $HOME/workspaces/photon&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Download latest VDDK from below link:&lt;/p>
&lt;p>&lt;a href="https://my.vmware.com/web/vmware/downloads/details?downloadGroup=VDDK670&amp;amp;productId=742" title="Link to VMware ovftool site">https://my.vmware.com/web/vmware/downloads/details?downloadGroup=VDDK670&amp;amp;productId=742&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Search for &lt;code>VMware-ovftool&lt;/code> in the same site and install it.&lt;/p>
&lt;p>For example:&lt;/p>
&lt;p>ovftool downloaded file:&lt;/p>
&lt;p>&lt;code>VMware-ovftool-4.3.0-13981069-lin.x86_64.bundle&lt;/code>&lt;/p>
&lt;p>Add exec permission and run it as sudo:&lt;/p>
&lt;p>&lt;code> $ chmod +x VMware-ovftool-4.3.0-13981069-lin.x86_64.bundle &amp;amp;&amp;amp; sudo ./VMware-ovftool-4.3.0-13981069-lin.x86_64.bundle --eulas-agreed --required&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>For VDDK, if the downloaded file is &lt;code>VMware-vix-disklib-6.7.0-8173251.x86_64.tar.gz&lt;/code>, untar the downloaded tarball:&lt;/p>
&lt;p>&lt;code>$ tar xf VMware-vix-disklib-6.7.0-8173251.x86_64.tar.gz&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Navigate to extracted directory.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>
&lt;p>Move the header files to /usr/include&lt;/p>
&lt;p>$ &lt;code>sudo mv include/*.h /usr/include&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Move the shared libs to /usr/lib/vmware
&lt;code>$ sudo mkdir -p /usr/lib/vmware &amp;amp;&amp;amp; sudo mv lib64/* /usr/lib/vmware &amp;amp;&amp;amp; sudo rm /usr/lib/vmware/libstdc++.so*&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol start="8">
&lt;li>
&lt;p>Export /usr/lib/vmware library path(only for current session). Do this step every time you try to build an ova image.&lt;/p>
&lt;p>&lt;code>$ export LD_LIBRARY_PATH=/usr/lib/vmware&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Navigate to your intended Photon source repository and run the following command.&lt;/p>
&lt;pre>&lt;code>
`sudo make image IMG_NAME=ova`
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Make the image for OVA UEFI&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;code>sudo make image IMG_NAME=ova_uefi&lt;/code>&lt;/p>
&lt;p>&lt;strong>Result&lt;/strong>&lt;/p>
&lt;p>This command first builds all RPMs corresponding to the SPEC files in your Photon repository and then builds a bootable ISO containing those RPMs.&lt;/p>
&lt;p>The RPMs thus built are stored under &lt;code>stage/RPMS/&lt;/code> directory within the repository, using the following directory hierarchy:&lt;/p>
&lt;pre>&lt;code>$HOME/workspaces/photon/stage/:
├──RPMS/:
├──noarch/*.noarch.rpm [Architecture-independent RPMs]
├──x86_64/*.x86_64.rpm [RPMs built for the x86-64 architecture]
├──aarch64/*.aarch64.rpm [RPMs built for the aarch64 (ARM64) architecture]
&lt;/code>&lt;/pre>&lt;p>The cloud image is created at `$HOME/workspaces/photon.&lt;/p></description></item></channel></rss>
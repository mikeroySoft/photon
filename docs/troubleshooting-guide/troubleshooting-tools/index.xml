<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>â€“ Troubleshooting Tools</title><link>/docs/troubleshooting-guide/troubleshooting-tools/</link><description>Recent content in Troubleshooting Tools on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs/troubleshooting-guide/troubleshooting-tools/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Common Tools</title><link>/docs/troubleshooting-guide/troubleshooting-tools/common-tools/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/troubleshooting-guide/troubleshooting-tools/common-tools/</guid><description>
&lt;p>The following are some tools that you can use to troubleshoot:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#top">top&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ps">ps&lt;/a>&lt;/li>
&lt;li>&lt;a href="#netstat">netstat&lt;/a>&lt;/li>
&lt;li>&lt;a href="#find">find&lt;/a>&lt;/li>
&lt;li>&lt;a href="#locate">locate&lt;/a>&lt;/li>
&lt;li>&lt;a href="#df">df&lt;/a>&lt;/li>
&lt;li>&lt;a href="#md5sum">md5sum&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sha256sum">sha256sum&lt;/a>&lt;/li>
&lt;li>&lt;a href="#strace">strace&lt;/a>&lt;/li>
&lt;li>&lt;a href="#file">file&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stat">stat&lt;/a>&lt;/li>
&lt;li>&lt;a href="#watch">watch&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vmstat-and-fdisk">vmstat and fdisk&lt;/a>&lt;/li>
&lt;li>&lt;a href="#lsof">lsof&lt;/a>&lt;/li>
&lt;li>&lt;a href="#fuser">fuser&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ldd">ldd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gdb">gdb&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Note&lt;/strong>: Some of the examples in this section are marked as abridged with ellipsis (&lt;code>...&lt;/code>).&lt;/p>
&lt;h2 id="top">top&lt;/h2>
&lt;p>The &lt;code>top&lt;/code> tool monitors system resources, workloads, and performance. It can unmask problems caused by processes or applications overconsuming CPUs, time, or RAM.&lt;/p>
&lt;p>To view a textual display of resource consumption, run the &lt;code>top&lt;/code> command:&lt;/p>
&lt;pre>&lt;code>top
&lt;/code>&lt;/pre>
&lt;p>Use can use &amp;lsquo;top&amp;rsquo; to kill a runaway or stalled process by typing &lt;code>k&lt;/code> followed by its process ID (PID).&lt;/p>
&lt;p>&lt;img src="images/top-in-photon-os.png" alt="Top on Photon OS">&lt;/p>
&lt;p>If the percent of CPU utilization is consistently high with little idle time, there might be a runaway process overconsuming CPUs. Restarting the service might solve the problem.&lt;/p>
&lt;p>To troubleshoot an unknown issue, run Top in the background in batch mode to write its output to a file and collect data about performance:&lt;/p>
&lt;pre>&lt;code>top d 120 b &amp;gt;&amp;gt; top120second.output
&lt;/code>&lt;/pre>
&lt;p>For a list of options that filter top output and other information, see the man page for &lt;code>top&lt;/code>.&lt;/p>
&lt;h2 id="ps">ps&lt;/h2>
&lt;p>The &lt;code>ps&lt;/code> tool shows the processes running on the machine. The &lt;code>ps&lt;/code> tool derives flexibility and power from its options, all of which are covered in the tool&amp;rsquo;s Photon OS man page:&lt;/p>
&lt;pre>&lt;code>man ps
&lt;/code>&lt;/pre>
&lt;p>You can use the following options of &lt;code>ps&lt;/code> for troubleshooting:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Show processes by user:&lt;/p>
&lt;p>&lt;code>ps aux&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Show processes and child processes by user:&lt;/p>
&lt;p>&lt;code>ps auxf&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Show processes containing the string &lt;code>ssh&lt;/code>:
&lt;code>ps aux | grep ssh&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Show processes and the command and options with which they were started:
&lt;code>ps auxww&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Example abridged output:&lt;/p>
&lt;pre>&lt;code>ps auxww
USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND
root 1 0.0 0.9 32724 3300 ? Ss 07:51 0:32 /lib/systemd/systemd --switched-root --system --deserialize 22
&lt;/code>&lt;/pre>
&lt;h2 id="netstat">netstat&lt;/h2>
&lt;p>The &lt;code>netstat&lt;/code> command can identify bottlenecks causing performance issues. It lists network connections, listening sockets, port information, and interface statistics for different protocols. Examples:&lt;/p>
&lt;pre>&lt;code>netstat --statistics
netstat --listening
&lt;/code>&lt;/pre>
&lt;h2 id="find">find&lt;/h2>
&lt;p>Use the &lt;code>find&lt;/code> command to troubleshoot a Photon OS machine that has stopped working. The following command lists the files in the root directory that have changed in the past day:&lt;/p>
&lt;pre>&lt;code> find / -mtime -1
&lt;/code>&lt;/pre>
&lt;p>See the &lt;code>find&lt;/code> &lt;a href="https://www.gnu.org/software/findutils/manual/find.html">manual&lt;/a>. Take note of the security considerations listed in the &lt;code>find&lt;/code> manual if you are using &lt;code>find&lt;/code> to troubleshoot an appliance running on Photon OS.&lt;/p>
&lt;h2 id="locate">locate&lt;/h2>
&lt;p>The &lt;code>locate&lt;/code> command is a fast way to find files and directories you onlay have a keyword. This command is similar to &lt;code>find&lt;/code> and part of the same &lt;code>findutils&lt;/code> package preinstalled on the full version of Photon OS by default. It finds file names in the file names database.&lt;/p>
&lt;p>Before you can use &lt;code>locate&lt;/code> accurately, update its database:&lt;/p>
&lt;pre>&lt;code>updatedb
&lt;/code>&lt;/pre>
&lt;p>Then run &lt;code>locate&lt;/code> to quickly find a file, such as any file name containing &lt;code>.network&lt;/code>, which can be helpful to see all the system&amp;rsquo;s &lt;code>.network&lt;/code> configuration files. The following is an abridged example:&lt;/p>
&lt;pre>&lt;code>locate .network
/etc/dbus-1/system.d/org.freedesktop.network1.conf
/etc/systemd/network/10-dhcp-en.network
/usr/lib/systemd/network/80-container-host0.network
/usr/lib/systemd/network/80-container-ve.network
/usr/lib/systemd/system/busnames.target.wants/org.freedesktop.network1.busname
/usr/lib/systemd/system/dbus-org.freedesktop.network1.service
/usr/lib/systemd/system/org.freedesktop.network1.busnname
/usr/share/dbus-1/system-services/org.freedesktop.network1.service
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>locate&lt;/code> command is also a quick way to see whether a troubleshooting tool is installed on Photon OS. Examples:&lt;/p>
&lt;pre>&lt;code>locate strace
/usr/bin/strace
/usr/bin/strace-graph
/usr/bin/strace-log-merge
/usr/share/man/man1/strace.1.gz
/usr/share/vim/vim74/syntax/strace.vim
locate traceroute
&lt;/code>&lt;/pre>
&lt;p>In this example, the &lt;code>strace&lt;/code> tool is installed but &lt;code>traceroute&lt;/code> is not.&lt;/p>
&lt;p>You can install &lt;code>traceroute&lt;/code> from the Photon OS repository:&lt;/p>
&lt;pre>&lt;code>tdnf install traceroute
&lt;/code>&lt;/pre>
&lt;h2 id="df">df&lt;/h2>
&lt;p>The &lt;code>df&lt;/code> command reports the disk space available on the file system. Running out of disk space can lead an application to fail and a quick check of the available space makes sense as an early troubleshooting step:&lt;/p>
&lt;pre>&lt;code>df -h
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>-h&lt;/code> option prints out the available and used space in human-readable sizes. After checking the space, you should also check the number of available inodes. Too few available inodes can lead to difficult-to-diagnose problems:&lt;/p>
&lt;pre>&lt;code>df -i
&lt;/code>&lt;/pre>
&lt;h2 id="md5sum">md5sum&lt;/h2>
&lt;p>The &lt;code>md5sum&lt;/code> tool calculates 128-bit RSA Data Security, Inc. MD5 Message Digest Algorithm hashes (a message digest, or digital signature, of a file) to uniquely identify a file and verify its integrity after file transfers, downloads, or disk errors when the security of the file is not in question.&lt;/p>
&lt;p>&lt;code>md5sum&lt;/code> can help troubleshooting installation issues by verifying that the version of Photon OS being installed matches the version on the public VMware Photon Packages download page. If, for instance, bytes were dropped during the download, the checksums will not match. Try downloading it again.&lt;/p>
&lt;h2 id="sha256sum">sha256sum&lt;/h2>
&lt;p>The &lt;code>sha256sum&lt;/code> tool calculates the authenticity of a file to prevent tampering when security is a concern. Photon OS also includes &lt;code>shasum&lt;/code>, &lt;code>sha1sum&lt;/code>, &lt;code>sha384sum&lt;/code>, and &lt;code>sha512sum&lt;/code>. See the man pages for &lt;code>md3sum&lt;/code>, &lt;code>sha256sum&lt;/code>, and the other SHA utilities.&lt;/p>
&lt;h2 id="strace">strace&lt;/h2>
&lt;p>The &lt;code>strace&lt;/code> utility follows system calls and signals as they are executed so that you can see what an application, command, or process is doing. &lt;code>strace&lt;/code> can trace failed commands, identify where a process obtains its configuration, monitor file activity, and find the location of a crash.&lt;/p>
&lt;p>By tracing system calls, &lt;code>strace&lt;/code> can help troubleshoot a broad range of problems, including issues with input-output, memory, interprocess communication, network usage, and application performance.&lt;/p>
&lt;p>For troubleshooting a problem that gives off few or no clues, the following command displays every system call:&lt;/p>
&lt;pre>&lt;code>strace ls -al
&lt;/code>&lt;/pre>
&lt;p>With strace commands, you can route the output to a file to make it easier to analyze:&lt;/p>
&lt;pre>&lt;code>strace -o output.txt ls -al
&lt;/code>&lt;/pre>
&lt;p>&lt;code>strace&lt;/code> can reveal the files that an application tries to open with the &lt;code>-eopen&lt;/code> option. This combination can help troubleshoot an application that is failing because it is missing files or being denied access to a file it needs. If, for example, you see &amp;ldquo;No such file or directory&amp;rdquo; in the results of &lt;code>strace -eopen&lt;/code>, something might be wrong:&lt;/p>
&lt;pre>&lt;code>strace -eopen sshd
open(&amp;quot;/usr/lib/x86_64/libpam.so.0&amp;quot;, O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)
open(&amp;quot;/usr/lib/libpam.so.0&amp;quot;, O_RDONLY|O_CLOEXEC) = 3
&lt;/code>&lt;/pre>
&lt;p>The results above indicate that the first file is missing because it is found in the next line. In other cases, the application might be unable to open one of its configuration files or it might be reading the wrong one. If the results say &amp;ldquo;permission denied&amp;rdquo; for one of the files, check the permissions of the file with &lt;code>ls -l&lt;/code> or &lt;code>stat&lt;/code>.&lt;/p>
&lt;p>When troubleshooting with &lt;code>strace&lt;/code>, you can include the process ID in its commands. Here&amp;rsquo;s an example of how to find a process ID:&lt;/p>
&lt;pre>&lt;code>ps -ef | grep apache
&lt;/code>&lt;/pre>
&lt;p>You can then use &lt;code>strace&lt;/code> to examine the file a process is working with:&lt;/p>
&lt;pre>&lt;code>strace -e trace=file -p 1719
&lt;/code>&lt;/pre>
&lt;p>A similar command can trace network traffic:&lt;/p>
&lt;pre>&lt;code>strace -p 812 -e trace=network
&lt;/code>&lt;/pre>
&lt;p>If an application is crashing, use &lt;code>strace&lt;/code> to trace the application and then analyze what happens right before the application crashes.&lt;/p>
&lt;p>You can also trace the child processes that an application spawns with the fork system call, and you can do so with &lt;code>systemctl&lt;/code> commands that start a process to identify why an application crashes immediately or fails to start:&lt;/p>
&lt;pre>&lt;code>strace -f -o output.txt systemctl start httpd
&lt;/code>&lt;/pre>
&lt;p>Example: If &lt;code>journalctl&lt;/code> is showing that networkd is failing, you can run strace to troubleshoot:&lt;/p>
&lt;pre>&lt;code>strace -o output.txt systemctl restart systemd-networkd
&lt;/code>&lt;/pre>
&lt;p>Then &lt;code>grep&lt;/code> inside the results for something, such as &lt;em>exit&lt;/em> or &lt;em>error&lt;/em>:&lt;/p>
&lt;pre>&lt;code>grep exit output.txt
&lt;/code>&lt;/pre>
&lt;p>If the results indicate &lt;code>systemd-resolved&lt;/code> is going wrong, you can then strace it:&lt;/p>
&lt;pre>&lt;code>strace -f -o output.txt systemctl restart systemd-resolved
&lt;/code>&lt;/pre>
&lt;h2 id="file">file&lt;/h2>
&lt;p>The &lt;code>file&lt;/code> command determines the file type, which can help troubleshoot problems when an application mistakes one type of file for another, leading it to errors. Example:&lt;/p>
&lt;pre>&lt;code>file /usr/sbin/sshd
/usr/sbin/sshd: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, stripped
&lt;/code>&lt;/pre>
&lt;h2 id="stat">stat&lt;/h2>
&lt;p>The &lt;code>stat&lt;/code> command can help troubleshoot problems with files or the file system by showing the last date it was modified and other information. Example:&lt;/p>
&lt;pre>&lt;code>stat /dev/sda1
File: '/dev/sda1'
Size: 0 Blocks: 0 IO Block: 4096 block special file
Device: 6h/6d Inode: 6614 Links: 1 Device type: 8,1
Access: (0660/brw-rw----) Uid: ( 0/ root) Gid: ( 8/ disk)
Access: 2016-09-02 12:23:56.135999936 +0000
Modify: 2016-09-02 12:23:52.879999981 +0000
Change: 2016-09-02 12:23:52.879999981 +0000
Birth: -
&lt;/code>&lt;/pre>
&lt;p>On Photon OS, &lt;code>stat&lt;/code> is handy to show permissions for a file or directory in both their absolute octal notation and their read-write-execute abbreviation; truncated example:&lt;/p>
&lt;pre>&lt;code>chmod 777 tester.md
stat tester.md
File: 'tester.md'
Size: 0 Blocks: 0 IO Block: 4096 regular empty file
Device: 801h/2049d Inode: 316385 Links: 1
Access: (0777/-rwxrwxrwx) Uid: ( 0/ root) Gid: ( 0/ root)
&lt;/code>&lt;/pre>
&lt;h2 id="watch">watch&lt;/h2>
&lt;p>The &lt;code>watch&lt;/code> utility runs a command at regular intervals so you can observe how its output changes over time. &lt;code>watch&lt;/code> can help dynamically monitor network links, routes, and other information when you are troubleshooting networking or performance issues. Examples:&lt;/p>
&lt;pre>&lt;code>watch -n0 --differences ss
watch -n1 --differences ip route
&lt;/code>&lt;/pre>
&lt;p>The following is an example with a screenshot of the output. This command monitors the traffic on your network links. The highlighted numbers are updated every second so you can see the traffic fluctuating:&lt;/p>
&lt;pre>&lt;code>watch -n1 --differences ip -s link show up
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="images/watchcmd.png" alt="The dynamic output of the watch utility">&lt;/p>
&lt;h2 id="vmstat-and-fdisk">vmstat and fdisk&lt;/h2>
&lt;p>The &lt;code>vmstat&lt;/code> tool displays statistics about virtual memory, processes, block input-output, disks, and CPU activity. This tool can help diagnose performance problems, especially system bottlenecks.&lt;/p>
&lt;p>Its output on a Photon OS virtual machine running in VMware Workstation 12 Pro without a heavy load looks like this:&lt;/p>
&lt;pre>&lt;code>vmstat
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
r b swpd free buff cache si so bi bo in cs us sy id wa st
0 0 0 5980 72084 172488 0 0 27 44 106 294 1 0 98 1 0
&lt;/code>&lt;/pre>
&lt;p>These codes are explained in the &lt;code>vmstat&lt;/code> man page.&lt;/p>
&lt;pre>&lt;code>- If `r`, the number of runnable processes, is higher than 10, the machine is under stress; consider intervening to reduce the number of processes or to distribute some of the processes to other machines. In other words, the machine has a bottleneck in executing processes.
- If `cs`, the number of context switches per second, is really high, there may be too many jobs running on the machine.
- If `in`, the number of interrupts per second, is relatively high, there might be a bottleneck for network or disk IO.
&lt;/code>&lt;/pre>
&lt;p>You can investigate disk IO further by using vmstat&amp;rsquo;s &lt;code>-d&lt;/code> option to report disk statistics. The following is an abridged example on a machine with little load:&lt;/p>
&lt;pre>&lt;code>vmstat -d
disk- ------------reads------------ ------------writes----------- -----IO------
total merged sectors ms total merged sectors ms cur sec
ram0 0 0 0 0 0 0 0 0 0 0
ram1 0 0 0 0 0 0 0 0 0 0
loop0 0 0 0 0 0 0 0 0 0 0
loop1 0 0 0 0 0 0 0 0 0 0
sr0 0 0 0 0 0 0 0 0 0 0
sda 22744 676 470604 12908 72888 24949 805224 127692 0 130
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>-D&lt;/code> option summarizes disk statistics:&lt;/p>
&lt;pre>&lt;code>vmstat -D
26 disks
2 partitions
22744 total reads
676 merged reads
470604 read sectors
12908 milli reading
73040 writes
25001 merged writes
806872 written sectors
127808 milli writing
0 inprogress IO
130 milli spent IO
&lt;/code>&lt;/pre>
&lt;p>You can also get statistics about a partition. First, run the &lt;code>fdisk -l&lt;/code> command to list the machine&amp;rsquo;s devices. Then run &lt;code>vmstat -p&lt;/code> with the name of a device to view its stats:&lt;/p>
&lt;pre>&lt;code>fdisk -l
Disk /dev/ram0: 4 MiB, 4194304 bytes, 8192 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
...
Device Start End Sectors Size Type
/dev/sda1 2048 16771071 16769024 8G Linux filesystem
/dev/sda2 16771072 16777182 6111 3M BIOS boot
vmstat -p /dev/sda1
sda1 reads read sectors writes requested writes
22579 473306 78510 866088
&lt;/code>&lt;/pre>
&lt;p>See the &lt;code>vmstat&lt;/code> man page for more options.&lt;/p>
&lt;h2 id="lsof">lsof&lt;/h2>
&lt;p>The &lt;code>lsof&lt;/code> command lists open files. The tool&amp;rsquo;s definition of an open file includes directories, libraries, streams, domain sockets, and Internet sockets. THis enables it to identify the files a process is using. Because a Linux system like Photon OS uses files to do its work, you can run &lt;code>lsof&lt;/code> as root to see how the system is using them and to see how an application works.&lt;/p>
&lt;p>If you cannot unmount a disk because it is in use, you can run &lt;code>lsof&lt;/code> to identify the files on the disk that are being used.&lt;/p>
&lt;p>The following is an example that shows the processes that are using the root directory:&lt;/p>
&lt;pre>&lt;code>lsof /root
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
bash 879 root cwd DIR 8,1 4096 262159 /root
bash 1265 root cwd DIR 8,1 4096 262159 /root
sftp-serv 1326 root cwd DIR 8,1 4096 262159 /root
gdb 1351 root cwd DIR 8,1 4096 262159 /root
bash 1395 root cwd DIR 8,1 4096 262159 /root
lsof 1730 root cwd DIR 8,1 4096 262159 /root
&lt;/code>&lt;/pre>
&lt;p>You can do the same with an application or virtual appliance by running &lt;code>lsof&lt;/code> with the user name or process ID of the app. The following example lists the open files used by the Apache HTTP Server:&lt;/p>
&lt;pre>&lt;code>lsof -u apache
&lt;/code>&lt;/pre>
&lt;p>Running the command with the &lt;code>-i&lt;/code> option lists all the open network and Internet files, which can help troubleshoot network problems:&lt;/p>
&lt;pre>&lt;code>lsof -i
&lt;/code>&lt;/pre>
&lt;p>See the Unix socket addresses of a user like &lt;em>zookeeper&lt;/em>:&lt;/p>
&lt;pre>&lt;code>lsof -u zookeeper -U
&lt;/code>&lt;/pre>
&lt;p>The following example shows the processes running on Ports 1 through 80:&lt;/p>
&lt;pre>&lt;code>lsof -i TCP:1-80
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
httpd 403 root 3u IPv6 10733 0t0 TCP *:http (LISTEN)
httpd 407 apache 3u IPv6 10733 0t0 TCP *:http (LISTEN)
httpd 408 apache 3u IPv6 10733 0t0 TCP *:http (LISTEN)
httpd 409 apache 3u IPv6 10733 0t0 TCP *:http (LISTEN)
sshd 820 root 3u IPv4 11336 0t0 TCP *:ssh (LISTEN)
sshd 820 root 4u IPv6 11343 0t0 TCP *:ssh (LISTEN)
sshd 1258 root 3u IPv4 48040 0t0 TCP 198.51.100.143:ssh-&amp;gt;198.51.100.1:49759 (ESTABLISHED)
sshd 1319 root 3u IPv4 50866 0t0 TCP 198.51.100.143:ssh-&amp;gt;198.51.100.1:51054 (ESTABLISHED)
sshd 1388 root 3u IPv4 56438 0t0 TCP 198.51.100.143:ssh-&amp;gt;198.51.100.1:60335 (ESTABLISHED)
&lt;/code>&lt;/pre>
&lt;p>You can also inspect the files opened by a process ID. The following example queries the files open by the systemd network service:&lt;/p>
&lt;pre>&lt;code>lsof -p 1917
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
systemd-n 1917 systemd-network cwd DIR 8,1 4096 2 /
systemd-n 1917 systemd-network txt REG 8,1 887896 272389 /usr/lib/systemd/systemd-networkd
systemd-n 1917 systemd-network mem REG 8,1 270680 262267 /usr/lib/libnss_files-2.22.so
systemd-n 1917 systemd-network 0r CHR 1,3 0t0 5959 /dev/null
systemd-n 1917 systemd-network 1u unix 0x0000000000000000 0t0 45734 type=STREAM
systemd-n 1917 systemd-network 3u netlink 0t0 6867 ROUTE
systemd-n 1917 systemd-network 4u unix 0x0000000000000000 0t0 45744 type=DGRAM
systemd-n 1917 systemd-network 9u netlink 0t0 45754 KOBJECT_UEVENT
systemd-n 1917 systemd-network 12u a_inode 0,11 0 5955 [timerfd]
systemd-n 1917 systemd-network 13u IPv4 104292 0t0 UDP 198.51.100.143:bootpc
&lt;/code>&lt;/pre>
&lt;h2 id="fuser">fuser&lt;/h2>
&lt;p>The &lt;code>fuser&lt;/code> command identifies the process IDs of processes using files or sockets. The term &lt;em>process&lt;/em> is, in this case, synonymous with &lt;em>user&lt;/em>. To identify the process ID of a process using a socket, run &lt;code>fuser&lt;/code> with its namespace option and specify &lt;code>tcp&lt;/code> or &lt;code>udp&lt;/code> and the name of the process or port. Examples:&lt;/p>
&lt;pre>&lt;code>fuser -n tcp ssh
ssh/tcp: 940 1308
fuser -n tcp http
http/tcp: 592 594 595 596
fuser -n tcp 80
80/tcp: 592 594 595 596
&lt;/code>&lt;/pre>
&lt;h2 id="ldd">ldd&lt;/h2>
&lt;p>By revealing the shared libraries that a program depends on, &lt;code>ldd&lt;/code> can help troubleshoot an application that is missing a library or finding the wrong one.&lt;/p>
&lt;p>For example, if you get a &amp;ldquo;file not found&amp;rdquo; output, check the path to the library.&lt;/p>
&lt;pre>&lt;code>ldd /usr/sbin/sshd
linux-vdso.so.1 (0x00007ffc0e3e3000)
libpam.so.0 =&amp;gt; (file not found)
libcrypto.so.1.0.0 =&amp;gt; /usr/lib/libcrypto.so.1.0.0 (0x00007f624e570000)
&lt;/code>&lt;/pre>
&lt;p>You can also use the &lt;code>objdump&lt;/code> command to show dependencies for a program&amp;rsquo;s object files; example:&lt;/p>
&lt;pre>&lt;code>objdump -p /usr/sbin/sshd | grep NEEDED
&lt;/code>&lt;/pre>
&lt;h2 id="gdb">gdb&lt;/h2>
&lt;p>The &lt;code>gdb&lt;/code> tool is the GNU debugger. It lets you see inside a program while it executes or when it crashes so that you can catch errors as they occur. The &lt;code>gdb&lt;/code> tool is typically used to debug programs written in C and C++. On Photon OS, &lt;code>gdb&lt;/code> can help you determine why an application crashed. See the man page for &lt;code>gdb&lt;/code> for instructions on how to run it.&lt;/p>
&lt;p>For an extensive example on how to use &lt;code>gdb&lt;/code> to troubleshoot Photon OS running on a VM when you cannot login to Photon OS, see the section on troubleshooting boot and logon problems.&lt;/p></description></item><item><title>Docs: Troubleshooting Tools Installed by Default</title><link>/docs/troubleshooting-guide/troubleshooting-tools/default-tools/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/troubleshooting-guide/troubleshooting-tools/default-tools/</guid><description>
&lt;p>The following troubleshooting tools are included in the full version of Photon OS:&lt;/p>
&lt;ul>
&lt;li>&lt;code>grep&lt;/code>. Searches files for patterns.&lt;/li>
&lt;li>&lt;code>ping&lt;/code>. Tests network connectivity.&lt;/li>
&lt;li>&lt;code>strings&lt;/code>. Displays the characters in a file to identify its contents.&lt;/li>
&lt;li>&lt;code>lsmod&lt;/code>. Lists loaded modules.&lt;/li>
&lt;li>&lt;code>ipcs&lt;/code>. Shows data about the inter-process communication (IPC) resources to which a process has read access. This data includes shared memory segments, message queues, and semaphore arrays.&lt;/li>
&lt;li>&lt;code>nm&lt;/code>. Lists symbols from object files.&lt;/li>
&lt;li>&lt;code>diff&lt;/code>. Compares files side by side. This tool is useful to compare configuration files of two versions when one version works and the other does not.&lt;/li>
&lt;/ul></description></item><item><title>Docs: Installing Tools from Repositories</title><link>/docs/troubleshooting-guide/troubleshooting-tools/installing-tools/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/troubleshooting-guide/troubleshooting-tools/installing-tools/</guid><description>
&lt;p>You can install several troubleshooting tools from the Photon OS repositories by using the default package management system, &lt;code>tdnf&lt;/code>.&lt;/p>
&lt;p>If a tool you require is not installed, search the repositories to see if it is available.&lt;/p>
&lt;p>For example, the traceroute tool is not installed by default. You can search for it in the repositories as follows:&lt;/p>
&lt;pre>&lt;code>tdnf search traceroute
traceroute : Traces the route taken by packets over an IPv4/IPv6 network
&lt;/code>&lt;/pre>
&lt;p>The results of the above command show that traceroute exists in the repository. You install it with &lt;code>tdnf&lt;/code>:&lt;/p>
&lt;pre>&lt;code>tdnf install traceroute
&lt;/code>&lt;/pre>
&lt;p>The following tools are not installed by default but are in the repository and can be installed with &lt;code>tdnf&lt;/code>:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>net-tools&lt;/code>. Networking tools.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ltrace&lt;/code>. Tool for intercepting and recording dynamic library calls. It can identify the function an application was calling when it crashed, making it useful for debugging.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>nfs-utils&lt;/code>. Client tools for the kernel Network File System, or NFS, including showmount. These are installed by default in the full version of Photon OS but not in the minimal version.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>pcstat&lt;/code>. A tool that inspects which pages of a file or files are being cached by the Linux kernel.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>sysstat&lt;/code> and &lt;code>sar&lt;/code>. Utilities to monitor system performance and usage activity. Installing sysstat also installs sar.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>systemtap&lt;/code> and &lt;code>crash&lt;/code>. The systemtap utility is a programmable instrumentation system for diagnosing problems of performance or function. Installing systemtap also installs crash, which is a kernel crash analysis utility for live systems and dump files.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>dstat&lt;/code>. Tool for viewing and analyzing statistics about system resources.&lt;/p>
&lt;p>The &lt;code>dstat&lt;/code> tool can help troubleshoot system performance. The tool shows live, running list of statistics about system resources:&lt;/p>
&lt;pre>&lt;code> dstat
You did not select any stats, using -cdngy by default.
----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
usr sys idl wai hiq siq| read writ| recv send| in out | int csw
1 0 98 1 0 0|4036B 42k| 0 0 | 0 0 | 95 276
1 0 98 1 0 0| 0 64k| 60B 940B| 0 0 | 142 320
1 1 98 0 0 0| 0 52k| 60B 476B| 0 0 | 149 385
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul></description></item><item><title>Docs: Linux Troubleshooting Tools</title><link>/docs/troubleshooting-guide/troubleshooting-tools/linux-troubleshooting-tools/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/troubleshooting-guide/troubleshooting-tools/linux-troubleshooting-tools/</guid><description>
&lt;p>The following Linux troubleshoot tools are neither installed on Photon OS by default nor available in the Photon OS repositories:&lt;/p>
&lt;ul>
&lt;li>iostat&lt;/li>
&lt;li>telnet (use SSH instead)&lt;/li>
&lt;li>Iprm&lt;/li>
&lt;li>hdparm&lt;/li>
&lt;li>syslog (use journalctl instead)&lt;/li>
&lt;li>ddd&lt;/li>
&lt;li>ksysmoops&lt;/li>
&lt;li>xev&lt;/li>
&lt;li>GUI tools (because Photon OS has no GUI)&lt;/li>
&lt;/ul></description></item></channel></rss>
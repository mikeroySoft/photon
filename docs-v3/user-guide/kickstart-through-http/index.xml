<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– Kickstart Through HTTP</title><link>/docs-v3/user-guide/kickstart-through-http/</link><description>Recent content in Kickstart Through HTTP on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs-v3/user-guide/kickstart-through-http/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs-V3: Prerequisites</title><link>/docs-v3/user-guide/kickstart-through-http/kickstart-prerequisites/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/user-guide/kickstart-through-http/kickstart-prerequisites/</guid><description>
&lt;p>Before you kick start a build, verify that you have the following resources:&lt;/p>
&lt;ul>
&lt;li>Packer 0.8 or later version.&lt;/li>
&lt;li>VMware Fusion or Workstation&lt;/li>
&lt;li>VirtualBox (optional)&lt;/li>
&lt;li>Photon Packer template. The template contains the following artifacts:
&lt;ul>
&lt;li>&lt;code>packer-photon.json&lt;/code> file&lt;/li>
&lt;li>&lt;code>scripts&lt;/code> folder. The folder that contains the scripts you require to kickstart Photon OS.&lt;/li>
&lt;li>&lt;code>vars&lt;/code> folder. The folder that contains the Photon OS 3.0 ISO URL.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>packages_minimal.json&lt;/code> file. The JSON file that contains the install profile you require.&lt;/li>
&lt;/ul></description></item><item><title>Docs-V3: Procedure</title><link>/docs-v3/user-guide/kickstart-through-http/kickstart-procedure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/user-guide/kickstart-through-http/kickstart-procedure/</guid><description>
&lt;p>To build Photon OS using the Packer template, set the variables that the template uses and run the build commands.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#set-variables">Set Variables&lt;/a>&lt;/li>
&lt;li>&lt;a href="#kick-start-build">Kick Start Build&lt;/a>&lt;/li>
&lt;li>&lt;a href="#build-vmware-workstation-or-fusion-vagrant-box">Build VMware Workstation or Fusion Vagrant Box&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="set-variables">Set Variables&lt;/h2>
&lt;p>To use the Packer template, you must set the variables that the template uses. You can set the variables through command line or a JSON file.&lt;/p>
&lt;p>Set the following variables:&lt;/p>
&lt;pre>&lt;code>- `iso_file` - The photon ISO for the build. This file can be local or remote.
- `iso_sha1sum` – The SHA1 sum of the ISO you want to build.
- `product_version` - The Photon OS release version that you want to build. This version is added to the image filename.
&lt;/code>&lt;/pre>
&lt;p>Preset JSON files with the required parameters are located in the &lt;code>photon-packer-templates/vars&lt;/code> folder.&lt;/p>
&lt;h2 id="kick-start-build">Kick Start Build&lt;/h2>
&lt;p>To kick start a build using the JSON file, run the following command:&lt;/p>
&lt;pre>&lt;code>packer build -var-file=vars/iso-3.0GA.json packer-photon.json
&lt;/code>&lt;/pre>&lt;p>To build Photon OS manually, run the following:&lt;/p>
&lt;pre>&lt;code>packer build \
-var 'iso_file=http://dl.bintray.com/vmware/photon/3.0/GA/iso/photon-3.0-26156e2.iso' \
-var 'iso_sha1sum=1c38dd6d00e11d3cbf7768ce93fc3eb8913a9673' \
-var 'product_version=3.0GA' \
packer-photon.json
&lt;/code>&lt;/pre>&lt;h2 id="build-vmware-workstation-or-fusion-vagrant-box">Build VMware Workstation or Fusion Vagrant Box&lt;/h2>
&lt;p>To build only a VMware Workstation or Fusion vagrant box, run:&lt;/p>
&lt;pre>&lt;code>packer build -only=vagrant-vmware_desktop -var-file=vars/iso-3.0GA.json packer-photon.json
&lt;/code>&lt;/pre>&lt;p>or:&lt;/p>
&lt;pre>&lt;code>packer build \
-only=vagrant-vmware_desktop \
-var 'iso_file= http://dl.bintray.com/vmware/photon/3.0/GA/iso/photon-3.0-26156e2.iso ' \
-var 'iso_sha1sum= 1c38dd6d00e11d3cbf7768ce93fc3eb8913a9673' \
-var 'product_version=3.0GA' \
packer-photon.json
&lt;/code>&lt;/pre>&lt;p>You can build to one of the following targets:&lt;/p>
&lt;ul>
&lt;li>&lt;code>vagrant-vmware_desktop&lt;/code> - Generates the &lt;code>vmware_desktop&lt;/code> compatible box found on Atlas as &lt;code>vmware/photon&lt;/code>.&lt;/li>
&lt;li>&lt;code>vagrant-virtualbox&lt;/code> - Generates the &lt;code>virtualbox&lt;/code> compatible box found on Atlas as &lt;code>vmware/photon&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Docs-V3: Photon Packer Template</title><link>/docs-v3/user-guide/kickstart-through-http/packer-template/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/user-guide/kickstart-through-http/packer-template/</guid><description>
&lt;p>The Photon Packer template folder has the following structure:&lt;/p>
&lt;pre>&lt;code>photon-packer-templates/
├── packer-photon.json
├── scripts
├── photon-kickstart.json
├── photon-package_provisioning.sh
├── photon-security_check.sh
├── photon-sharedfolders_prep.sh
├── photon-vagrant-user_provisioning.sh
├── photon-vagrant-vbox_additions.sh
├── photon-vagrantfile.rb
├── photon-virtualbox-load-module.conf
├── vars
├── iso-3.0GA.json
&lt;/code>&lt;/pre>&lt;h2 id="packer-photonjson">packer-photon.json&lt;/h2>
&lt;p>The following are the contents of the &lt;code>photon-packer-templates/packer-photon.json&lt;/code> file:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;variables&amp;quot;: {
&amp;quot;iso_file&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;iso_sha1sum&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;product_version&amp;quot;: &amp;quot;&amp;quot;,
&amp;quot;root_password&amp;quot;: &amp;quot;2RQrZ83i79N6szpvZNX6&amp;quot;
},
&amp;quot;builders&amp;quot;: [
{
&amp;quot;name&amp;quot;: &amp;quot;vagrant-vmware_desktop&amp;quot;,
&amp;quot;vm_name&amp;quot;: &amp;quot;photon&amp;quot;,
&amp;quot;vmdk_name&amp;quot;: &amp;quot;photon-disk1&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;vmware-iso&amp;quot;,
&amp;quot;headless&amp;quot;: false,
&amp;quot;disk_size&amp;quot;: 20480,
&amp;quot;disk_type_id&amp;quot;: 0,
&amp;quot;guest_os_type&amp;quot;: &amp;quot;other3xlinux-64&amp;quot;,
&amp;quot;iso_url&amp;quot;: &amp;quot;{{user `iso_file`}}&amp;quot;,
&amp;quot;iso_checksum&amp;quot;: &amp;quot;{{user `iso_sha1sum`}}&amp;quot;,
&amp;quot;iso_checksum_type&amp;quot;: &amp;quot;sha1&amp;quot;,
&amp;quot;ssh_username&amp;quot;: &amp;quot;root&amp;quot;,
&amp;quot;ssh_password&amp;quot;: &amp;quot;{{user `root_password`}}&amp;quot;,
&amp;quot;ssh_wait_timeout&amp;quot;: &amp;quot;60m&amp;quot;,
&amp;quot;boot_wait&amp;quot;: &amp;quot;5s&amp;quot;,
&amp;quot;shutdown_command&amp;quot;: &amp;quot;shutdown -h now&amp;quot;,
&amp;quot;http_directory&amp;quot;: &amp;quot;scripts&amp;quot;,
&amp;quot;version&amp;quot;: 11,
&amp;quot;vmx_data&amp;quot;: {
&amp;quot;scsi0.virtualDev&amp;quot;: &amp;quot;pvscsi&amp;quot;,
&amp;quot;ethernet0.virtualDev&amp;quot;: &amp;quot;vmxnet3&amp;quot;
},
&amp;quot;vmx_data_post&amp;quot;: {
&amp;quot;displayname&amp;quot;: &amp;quot;VMware Photon&amp;quot;,
&amp;quot;usb.present&amp;quot;: &amp;quot;false&amp;quot;
},
&amp;quot;boot_command&amp;quot;: [
&amp;quot;&amp;lt;esc&amp;gt;&amp;lt;wait&amp;gt;&amp;quot;,
&amp;quot;vmlinuz initrd=initrd.img root=/dev/ram0 loglevel=3 ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/photon-kickstart.json photon.media=cdrom&amp;quot;,
&amp;quot;&amp;lt;enter&amp;gt;&amp;quot;
]
},
{
&amp;quot;name&amp;quot;: &amp;quot;vagrant-virtualbox&amp;quot;,
&amp;quot;vm_name&amp;quot;: &amp;quot;photon&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;virtualbox-iso&amp;quot;,
&amp;quot;headless&amp;quot;: false,
&amp;quot;hard_drive_interface&amp;quot;: &amp;quot;scsi&amp;quot;,
&amp;quot;disk_size&amp;quot;: 20480,
&amp;quot;guest_os_type&amp;quot;: &amp;quot;Linux_64&amp;quot;,
&amp;quot;iso_url&amp;quot;: &amp;quot;{{user `iso_file`}}&amp;quot;,
&amp;quot;iso_checksum&amp;quot;: &amp;quot;{{user `iso_sha1sum`}}&amp;quot;,
&amp;quot;iso_checksum_type&amp;quot;: &amp;quot;sha1&amp;quot;,
&amp;quot;ssh_username&amp;quot;: &amp;quot;root&amp;quot;,
&amp;quot;ssh_password&amp;quot;: &amp;quot;{{user `root_password`}}&amp;quot;,
&amp;quot;ssh_wait_timeout&amp;quot;: &amp;quot;60m&amp;quot;,
&amp;quot;boot_wait&amp;quot;: &amp;quot;5s&amp;quot;,
&amp;quot;http_directory&amp;quot;: &amp;quot;scripts&amp;quot;,
&amp;quot;shutdown_command&amp;quot;: &amp;quot;shutdown -h now&amp;quot;,
&amp;quot;boot_command&amp;quot;: [
&amp;quot;&amp;lt;esc&amp;gt;&amp;lt;wait&amp;gt;&amp;quot;,
&amp;quot;vmlinuz initrd=initrd.img root=/dev/ram0 loglevel=3 ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/photon-kickstart.json&amp;quot;,
&amp;quot;&amp;lt;enter&amp;gt;&amp;quot;
]
}
],
&amp;quot;provisioners&amp;quot;: [
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;script&amp;quot;: &amp;quot;scripts/photon-package_provisioning.sh&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;only&amp;quot;: [&amp;quot;vagrant-vmware_desktop&amp;quot;, &amp;quot;vagrant-virtualbox&amp;quot;],
&amp;quot;script&amp;quot;: &amp;quot;scripts/photon-vagrant-user_provisioning.sh&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;only&amp;quot;: [&amp;quot;vagrant-vmware_desktop&amp;quot;],
&amp;quot;script&amp;quot;: &amp;quot;scripts/photon-sharedfolders_prep.sh&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;only&amp;quot;: [&amp;quot;vagrant-virtualbox&amp;quot;],
&amp;quot;script&amp;quot;: &amp;quot;scripts/photon-vagrant-vbox_additions.sh&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;file&amp;quot;,
&amp;quot;only&amp;quot;: [&amp;quot;vagrant-virtualbox&amp;quot;],
&amp;quot;source&amp;quot;: &amp;quot;scripts/photon-virtualbox-load-module.conf&amp;quot;,
&amp;quot;destination&amp;quot;: &amp;quot;/etc/modules-load.d/virtualbox.conf&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;inline&amp;quot;: [&amp;quot;sed -i '/linux/ s/$/ net.ifnames=0/' /boot/grub2/grub.cfg&amp;quot;]
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;inline&amp;quot;: [&amp;quot;echo 'GRUB_CMDLINE_LINUX=\&amp;quot;net.ifnames=0\&amp;quot;' &amp;gt;&amp;gt; /etc/default/grub&amp;quot;]
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;script&amp;quot;: &amp;quot;scripts/photon-security_check.sh&amp;quot;
},
{
&amp;quot;type&amp;quot;: &amp;quot;shell&amp;quot;,
&amp;quot;inline&amp;quot;: [&amp;quot;sed -i 's/OS/Linux/' /etc/photon-release&amp;quot;]
}
],
&amp;quot;post-processors&amp;quot;: [
{
&amp;quot;type&amp;quot;: &amp;quot;vagrant&amp;quot;,
&amp;quot;only&amp;quot;: [&amp;quot;vagrant-vmware_desktop&amp;quot;, &amp;quot;vagrant-virtualbox&amp;quot;],
&amp;quot;compression_level&amp;quot;: 9,
&amp;quot;vagrantfile_template&amp;quot;: &amp;quot;scripts/photon-vagrantfile.rb&amp;quot;,
&amp;quot;output&amp;quot;: &amp;quot;photon-{{user `product_version`}}-{{.BuildName}}.box&amp;quot;
}
]
}
&lt;/code>&lt;/pre>&lt;h2 id="photon-kickstartjson">photon-kickstart.json&lt;/h2>
&lt;p>The following are the contents of the &lt;code>photon-packer-templates/scripts/photon-kickstart.json&lt;/code> file:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;hostname&amp;quot;: &amp;quot;photon&amp;quot;,
&amp;quot;password&amp;quot;:
{
&amp;quot;crypted&amp;quot;: false,
&amp;quot;text&amp;quot;: &amp;quot;2RQrZ83i79N6szpvZNX6&amp;quot;
},
&amp;quot;disk&amp;quot;: &amp;quot;/dev/sda&amp;quot;,
&amp;quot;packagelist_file&amp;quot;: &amp;quot;packages_minimal.json&amp;quot;,
&amp;quot;postinstall&amp;quot;: [
&amp;quot;#!/bin/sh&amp;quot;,
&amp;quot;sed -i 's/PermitRootLogin no/PermitRootLogin yes/g' /etc/ssh/sshd_config&amp;quot;,
&amp;quot;systemctl restart sshd.service&amp;quot;
]
}
&lt;/code>&lt;/pre>&lt;h2 id="iso-30gajson">iso-3.0GA.json&lt;/h2>
&lt;p>The following are the contents of the &lt;code>photon-packer-templates/vars/iso-3.0GA.json&lt;/code> file:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;product_version&amp;quot; : &amp;quot;3.0GA&amp;quot;,
&amp;quot;iso_sha1sum&amp;quot; : &amp;quot;1c38dd6d00e11d3cbf7768ce93fc3eb8913a9673&amp;quot;,
&amp;quot;iso_file&amp;quot; : &amp;quot;http://dl.bintray.com/vmware/photon/3.0/GA/iso/photon-3.0-26156e2.iso&amp;quot;
}
&lt;/code>&lt;/pre>&lt;p>For more information about the template, see &lt;a href="https://github.com/vmware/photon-packer-templates">Photon Packer Template&lt;/a>&lt;/p></description></item><item><title>Docs-V3: packages_minimal.json File</title><link>/docs-v3/user-guide/kickstart-through-http/packages-minimal-json-file/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/user-guide/kickstart-through-http/packages-minimal-json-file/</guid><description>
&lt;p>The &lt;code>packages_minimal.json&lt;/code> file contains the install profile that you require.&lt;/p>
&lt;p>The contents of the file are as follows:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;packages&amp;quot;: [
&amp;quot;minimal&amp;quot;,
&amp;quot;linux&amp;quot;,
&amp;quot;initramfs&amp;quot;
]
}
&lt;/code>&lt;/pre>&lt;p>&amp;lsquo;minimal` is a meta package contains a number of default packages.&lt;/p>
&lt;p>For more imformation, see &lt;a href="https://github.com/vmware/photon/blob/3.0/SPECS/minimal/minimal.spec">minimal.spec&lt;/a>&lt;/p></description></item></channel></rss>
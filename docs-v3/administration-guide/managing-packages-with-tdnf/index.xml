<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>â€“ Package Management in Photon OS with `tdnf`</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/</link><description>Recent content in Package Management in Photon OS with `tdnf` on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs-v3/administration-guide/managing-packages-with-tdnf/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs-V3: Introduction to 'tdnf'</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/intro-to-tndf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/intro-to-tndf/</guid><description>
&lt;p>On Photon OS, tdnf is the default package manager for installing new packages. It is a C implementation of the DNF package manager without Python dependencies. DNF is the next upcoming major version of yum.&lt;/p>
&lt;p>Tdnf appears in the minimal and full versions of Photon OS. Tdnf reads yum repositories and works like yum. The full version of Photon OS also includes yum, and you can install packages by using yum if you want.&lt;/p>
&lt;p>In the minimal version of Photon OS, you can manage packages by using yum, but you must install it first by running the following &lt;code>tdnf&lt;/code> command as root:&lt;/p>
&lt;pre>&lt;code>tdnf install yum
&lt;/code>&lt;/pre>
&lt;p>Tdnf implements a subset of the &lt;code>dnf&lt;/code> commands as listed in the &lt;a href="http://dnf.readthedocs.org/en/latest/">dnf guide&lt;/a>.&lt;/p></description></item><item><title>Docs-V3: Configuration Files and Repositories</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/configuration-files-and-repositories/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/configuration-files-and-repositories/</guid><description>
&lt;p>The main configuration files reside in /etc/tdnf/tdnf.conf. The configuration file appears as follows:&lt;/p>
&lt;pre>&lt;code>cat /etc/tdnf/tdnf.conf
[main]
gpgcheck=1
installonly_limit=3
clean_requirements_on_remove=true
repodir=/etc/yum.repos.d
cachedir=/var/cache/tdnf
&lt;/code>&lt;/pre>
&lt;p>The cache files for data and metadata reside in /var/cache/tdnf.&lt;/p>
&lt;p>The following repositories appear in /etc/yum.repos.d/ with &lt;code>.repo&lt;/code> file extensions:&lt;/p>
&lt;pre>&lt;code>ls /etc/yum.repos.d/
lightwave.repo
photon-extras.repo
photon-iso.repo
photon-updates.repo
photon.repo
&lt;/code>&lt;/pre>
&lt;p>You can list the the repositories by using the &lt;code>tdnf repolist&lt;/code> command. Tdnf filters the results with &lt;code>enabled&lt;/code>, &lt;code>disabled&lt;/code>, and &lt;code>all&lt;/code>. Running the command without specifying an argument returns the enabled repositories:&lt;/p>
&lt;pre>&lt;code>tdnf repolist
repo id repo name status
photon-updates VMware Photon Linux 2.0(x86_64)Updates enabled
photon-extras VMware Photon Extras 2.0(x86_64) enabled
photon VMware Photon Linux 2.0(x86_64) enabled
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>photon-iso.repo&lt;/code>, however, does not appear in the list of repositories because it is unavailable on the virtual machine from which these examples are taken. The &lt;code>photon-iso.repo&lt;/code> is the default repository and it points to /media/cdrom. The &lt;code>photon-iso.repo&lt;/code> appears as follows:&lt;/p>
&lt;pre>&lt;code>cat /etc/yum.repos.d/photon-iso.repo
[photon-iso]
name=VMWare Photon Linux 2.0(x86_64)
baseurl=file:///mnt/cdrom/RPMS
gpgkey=file:///etc/pki/rpm-gpg/VMWARE-RPM-GPG-KEY
gpgcheck=1
enabled=0
skip_if_unavailable=True
&lt;/code>&lt;/pre>
&lt;p>The local cache is populated with data from the repository:&lt;/p>
&lt;pre>&lt;code>ls -l /var/cache/tdnf/photon
total 8
drwxr-xr-x 2 root root 4096 May 18 22:52 repodata
d-wxr----t 3 root root 4096 May 3 22:51 rpms
&lt;/code>&lt;/pre>
&lt;p>You can clear the cache to help troubleshoot a problem, but doing so might slow the performance of &lt;code>tdnf&lt;/code> until the cache becomes repopulated with data. To clear the cache, use the following command:&lt;/p>
&lt;pre>&lt;code>tdnf clean all
Cleaning repos: photon photon-extras photon-updates lightwave
Cleaning up everything
&lt;/code>&lt;/pre>
&lt;p>The command purges the repository data from the cache:&lt;/p>
&lt;pre>&lt;code>ls -l /var/cache/tdnf/photon
total 4
d-wxr----t 3 root root 4096 May 3 22:51 rpms&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Adding a New Repository</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/adding-a-new-repository/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/adding-a-new-repository/</guid><description>
&lt;p>On Photon OS, you can add a new repository from which &lt;code>tdnf&lt;/code> installs packages. To add a new repository, you create a repository configuration file with a &lt;code>.repo&lt;/code> extension and place it in &lt;code>/etc/yum.repos.d&lt;/code>. The repository can be on either the Internet or a local server containing your in-house applications.&lt;/p>
&lt;p>Be careful if you add a repository that is on the Internet. Installing packages from untrusted or unverified sources might put the security, stability, or compatibility of your system at risk. It might also make your system harder to maintain.&lt;/p>
&lt;p>On Photon OS, the existing repositories appear in the &lt;code>/etc/yum.repos.d&lt;/code> directory:&lt;/p>
&lt;pre>&lt;code>ls /etc/yum.repos.d/
lightwave.repo
photon-extras.repo
photon-iso.repo
photon-updates.repo
photon.repo
&lt;/code>&lt;/pre>
&lt;p>To view the the format and information that a new repository configuration file should contain, see one of the &lt;code>.repo&lt;/code> files. The following is an example:&lt;/p>
&lt;pre>&lt;code>cat /etc/yum.repos.d/lightwave.repo
[lightwave]
name=VMware Lightwave 1.0(x86_64)
baseurl=https://dl.bintray.com/vmware/lightwave
gpgkey=file:///etc/pki/rpm-gpg/VMWARE-RPM-GPG-KEY
gpgcheck=1
enabled=1
skip_if_unavailable=True
&lt;/code>&lt;/pre>
&lt;p>The minimal information needed to establish a repository is an ID and human-readable name of the repository and its base URL. The ID, which appears in square brackets, must be one word that is unique amoung the system&amp;rsquo;s repositories; in the example above, it is &lt;code>[lightwave]&lt;/code>.&lt;/p>
&lt;p>The &lt;code>baseurl&lt;/code> is a URL for the repository&amp;rsquo;s repodata directory. For a repository on a local server that can be accessed directly or mounted as a file system, the base URL can be a file referenced by &lt;code>file://&lt;/code>. Example:&lt;/p>
&lt;pre>&lt;code>baseurl=file:///server/repo/
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>gpgcheck&lt;/code> setting specifies whether to check the GPG signature. The &lt;code>gpgkey&lt;/code> setting furnishes the URL for the repository&amp;rsquo;s ASCII-armored GPG key file. Tdnf uses the GPG key to verify a package if its key has not been imported into the RPM database.&lt;/p>
&lt;p>The &lt;code>enabled&lt;/code> setting tells &lt;code>tdnf&lt;/code> whether to poll the repository. If &lt;code>enabled&lt;/code> is set to &lt;code>1&lt;/code>, &lt;code>tdnf&lt;/code> polls it; if it is set to &lt;code>0&lt;/code>, &lt;code>tdnf&lt;/code> ignores it.&lt;/p>
&lt;p>The &lt;code>skip_if_unavailable&lt;/code> setting instructs &lt;code>tdnf&lt;/code> to continue running if the repository goes offline.&lt;/p>
&lt;p>Other options and variables can appear in the repository file. The variables that are used with some of the options can reduce future changes to the repository configuration files. There are variables to replace the value of the version of the package and to replace the base architecture. For more information, see the man page for &lt;code>yum.conf&lt;/code> on the full version of Photon OS: &lt;code>man yum.conf&lt;/code>&lt;/p>
&lt;p>The following is an example of how to add a new repository for a local server that &lt;code>tdnf&lt;/code> polls for packages:&lt;/p>
&lt;pre>&lt;code>cat &amp;gt; /etc/yum.repos.d/apps.repo &amp;lt;&amp;lt; &amp;quot;EOF&amp;quot;
[localapps]
name=Local In-House Applications(x86_64)
baseurl=file:///appserver/apps
enabled=1
skip_if_unavailable=True
EOF
&lt;/code>&lt;/pre>
&lt;p>Because this new repository resides on a local server, make sure the Photon OS machine can connect to it by mounting it.&lt;/p>
&lt;p>After establishing a new repository, you must run the following command to update the cached binary metadata for the repositories that &lt;code>tdnf&lt;/code> polls:&lt;/p>
&lt;pre>&lt;code>tdnf makecache
Refreshing metadata for: 'VMware Lightwave 1.0(x86_64)'
Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)Updates'
Refreshing metadata for: 'VMware Photon Extras 1.0(x86_64)'
Refreshing metadata for: 'Local In-House Applications(x86_64)'
Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)'
Metadata cache created.&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Configure a Repository</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/configure-a-repository/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/configure-a-repository/</guid><description>
&lt;p>Photon OS comes with a preconfigured repository called &lt;code>photon-iso&lt;/code> that resides in &lt;code>\etc\yum.repos.d.&lt;/code> If you receive an access error message when working with the &lt;code>photon-iso&lt;/code> repository, it is probably because you do not have the Photon OS ISO mounted. Mount the ISO and the run the following command to update the metadata for all known repositories, including &lt;code>photon-iso&lt;/code>:&lt;/p>
&lt;pre>&lt;code>mount /dev/cdrom /media/cdrom
tdnf makecache
Refreshing metadata for: 'VMware Lightwave 1.0(x86_64)'
Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)Updates'
Refreshing metadata for: 'VMware Photon Extras 1.0(x86_64)'
Refreshing metadata for: 'VMware Photon Linux 1.0(x86_64)'
Metadata cache created.
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Adding the Dev Repository to Get New Packages from the GitHub Dev Branch</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/adding-the-dev-repository/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/adding-the-dev-repository/</guid><description>
&lt;p>To try out new packages or the latest versions of existing packages as they are merged into the dev branch of the Photon OS GitHub site, add the &lt;code>dev&lt;/code> repository to your repository list.&lt;/p>
&lt;p>Perform th following steps:&lt;/p>
&lt;ol>
&lt;li>On your Photon OS machine, run the following command as root to create a repository configuration file named &lt;code>photon-dev.repo&lt;/code>, place it in &lt;code>/etc/yum.repos.d&lt;/code>, and concatenate the repository information into the file:&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>cat &amp;gt; /etc/yum.repos.d/photon-dev.repo &amp;lt;&amp;lt; &amp;quot;EOF&amp;quot;
[photon-dev]
name=VMware Photon Linux Dev(x86_64)
baseurl=https://dl.bintray.com/vmware/photon_dev_$basearch
gpgkey=file:///etc/pki/rpm-gpg/VMWARE-RPM-GPG-KEY
gpgcheck=1
enabled=1
skip_if_unavailable=True
EOF
``` .
2. After establishing a new repository, run the following command to update the cached binary metadata for the repositories that `tdnf` polls:
&lt;/code>&lt;/pre>&lt;p>tdnf makecache&lt;/p>
&lt;pre>&lt;code>
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Standard Syntax for tdnf Commands</title><link>/docs-v3/administration-guide/managing-packages-with-tdnf/standard-syntax-for-tndf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-packages-with-tdnf/standard-syntax-for-tndf/</guid><description>
&lt;p>The standard syntax for &lt;code>tdnf&lt;/code> commands is the same as that for DNF and is as follows:&lt;/p>
&lt;pre>&lt;code>tdnf [options] &amp;lt;command&amp;gt; [&amp;lt;arguments&amp;gt;...]
&lt;/code>&lt;/pre>
&lt;p>You can view help information by using the following commands:&lt;/p>
&lt;pre>&lt;code>tdnf --help
tdnf -h&lt;/code>&lt;/pre></description></item></channel></rss>
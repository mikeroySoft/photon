<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>â€“ Managing Services with `systemd`</title><link>/docs-v3/administration-guide/managing-services-withsystemd/</link><description>Recent content in Managing Services with `systemd` on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs-v3/administration-guide/managing-services-withsystemd/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs-V3: Viewing Services</title><link>/docs-v3/administration-guide/managing-services-withsystemd/viewing-services/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/viewing-services/</guid><description>
&lt;p>To view a description of all the loaded and active units, run the &lt;code>systemctl&lt;/code> command without any options or arguments:&lt;/p>
&lt;pre>&lt;code>systemctl
&lt;/code>&lt;/pre>
&lt;p>To see all the loaded, active, and inactive units and their description, run the following command:&lt;/p>
&lt;pre>&lt;code>systemctl --all
&lt;/code>&lt;/pre>
&lt;p>To see all the unit files and their current status but no description, run thie following command:&lt;/p>
&lt;pre>&lt;code>systemctl list-unit-files
&lt;/code>&lt;/pre>
&lt;p>The &lt;code>grep&lt;/code> command filters the services by a search term, a helpful tactic to recall the exact name of a unit file without looking through a long list of names. Example:&lt;/p>
&lt;pre>&lt;code>systemctl list-unit-files | grep network
org.freedesktop.network1.busname static
dbus-org.freedesktop.network1.service enabled
systemd-networkd-wait-online.service enabled
systemd-networkd.service enabled
systemd-networkd.socket enabled
network-online.target static
network-pre.target static
network.target static&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Controlling Services</title><link>/docs-v3/administration-guide/managing-services-withsystemd/controlling-services/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/controlling-services/</guid><description>
&lt;p>To control services on Photon OS, use &lt;code>systemctl&lt;/code> command.&lt;/p>
&lt;p>For example, instead of running the &lt;code>/etc/init.d/ssh&lt;/code> script to stop and start the OpenSSH server on a init.d-based Linux system, run the following &lt;code>systemctl&lt;/code> commands on Photon OS:&lt;/p>
&lt;pre>&lt;code>systemctl stop sshd
systemctl start sshd
&lt;/code>&lt;/pre>
&lt;p>The systemctl tool includes a range of commands and options for inspecting and controlling the state of systemd and the service manager. For more information, see the &lt;a href="https://www.freedesktop.org/software/systemd/man/systemctl.html">systemctl man page&lt;/a>.&lt;/p></description></item><item><title>Docs-V3: Creating a Startup Service</title><link>/docs-v3/administration-guide/managing-services-withsystemd/creating-a-startup-service/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/creating-a-startup-service/</guid><description>
&lt;p>Use &lt;code>systemd&lt;/code> to create a startup service.&lt;/p>
&lt;p>The following example shows you how to create a systemd startup service that changes the maximum transmission unit (MTU) of the default Ethernet connection, &lt;code>eth0&lt;/code>.&lt;/p>
&lt;ol>
&lt;li>Concatenate the following block of code into a file:&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>cat &amp;lt;&amp;lt; EOF &amp;gt;&amp;gt; /lib/systemd/system/eth0.service
[Unit]
Description=Network interface initialization
After=local-fs.target network-online.target network.target
Wants=local-fs.target network-online.target network.target
[Service]
ExecStart=/usr/sbin/ifconfig eth0 mtu 1460 up
Type=oneshot
[Install]
WantedBy=multi-user.target
EOF
&lt;/code>&lt;/pre>&lt;ol>
&lt;li>Set the service to auto-start when the system boots:&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>cd /lib/systemd/system/multi-user.target.wants/
ln -s ../eth0.service eth0.service
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Disabling the Photon OS httpd.service</title><link>/docs-v3/administration-guide/managing-services-withsystemd/disabling-the-photon-os-httpd.service/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/disabling-the-photon-os-httpd.service/</guid><description>
&lt;p>If your application or appliance includes its own HTTP server, you must turn off and disable the HTTP server that comes with Photon OS so that it does not conflict with your own HTTP server.&lt;/p>
&lt;p>To stop it and disable it, run the following commands as root:&lt;/p>
&lt;pre>&lt;code>systemctl stop httpd.service
systemctl disable httpd.service
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Installing Sendmail</title><link>/docs-v3/administration-guide/managing-services-withsystemd/installing-sendmail/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/installing-sendmail/</guid><description>
&lt;p>Before you install Sendmail, you should set the fully qualified domain name (FQDN) of your Photon OS machine.&lt;/p>
&lt;p>By default, Sendmail is not installed with either the minimal or full version of Photon OS. When you install Sendmail, it provides Photon OS with a &lt;code>systemd&lt;/code> service file that typically enables Sendmail. If the service is not enabled after installation, you must enable it.&lt;/p>
&lt;p>Sendmail resides in the Photon extras repository. You can install it with &lt;code>tdnf&lt;/code> after setting the machine&amp;rsquo;s FQDN.&lt;/p>
&lt;h2 id="procedure">Procedure&lt;/h2>
&lt;ol>
&lt;li>Check whether the FQDN of the machine is set by running the &lt;code>hostnamectl status&lt;/code> command:&lt;/li>
&lt;/ol>
&lt;pre>&lt;code class="language-console" data-lang="console">hostnamectl status
Static hostname: photon-d9ee400e194e
Icon name: computer-vm
Chassis: vm
Machine ID: a53b414142f944319bd0c8df6d811f36
Boot ID: 1f75baca8cc249f79c3794978bd82977
Virtualization: vmware
Operating System: VMware Photon/Linux
Kernel: Linux 4.4.8
Architecture: x86-64
&lt;/code>&lt;/pre>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
In the results above, the FQDN is not set. The Photon OS machine only has a short name. If the FQDN were set, the hostname would be in its full form, typically with a domain name.
&lt;/div>
&lt;ol start="2">
&lt;li>
&lt;p>If the machine does not have an FQDN, set one by running &lt;code>hostnamectl set-hostname new-name&lt;/code>, replacing &lt;code>new-name&lt;/code> with the FQDN that you want. For example:&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">hostnamectl set-hostname photon-d9ee400e194e.corp.example.com
&lt;/code>&lt;/pre>&lt;p>The &lt;code>hostnamectl status&lt;/code> command now shows that the machine has an FQDN:&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">root@photon-d9ee400e194e [ ~ ]# hostnamectl status
Static hostname: photon-d9ee400e194e.corp.example.com
Icon name: computer-vm
Chassis: vm
Machine ID: a53b414142f944319bd0c8df6d811f36
Boot ID: 1f75baca8cc249f79c3794978bd82977
Virtualization: vmware
Operating System: VMware Photon/Linux
Kernel: Linux 4.4.8
Architecture: x86-64
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Install Sendmail:&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">tdnf install sendmail
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Verify if Sendmail is enabled:&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">systemctl status sendmail
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Enable Sendmail if it is disabled and then start it:&lt;/p>
&lt;pre>&lt;code class="language-console" data-lang="console">systemctl enable sendmail
systemctl start sendmail
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol></description></item><item><title>Docs-V3: Auditing System Events with auditd</title><link>/docs-v3/administration-guide/managing-services-withsystemd/auditing-system-events-with-auditd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/auditing-system-events-with-auditd/</guid><description>
&lt;p>To manage security on Photon OS, the Linux auditing service &lt;code>auditd&lt;/code> is enabled and active by default on the full version of Photon OS.&lt;/p>
&lt;p>The following command shows the security status:&lt;/p>
&lt;pre>&lt;code>systemctl status auditd
* auditd.service - Security Auditing Service
Loaded: loaded (/usr/lib/systemd/system/auditd.service; enabled; vendor preset: enabled)
Active: active (running) since Fri 2016-04-29 15:08:50 UTC; 1 months 9 days ago
Main PID: 250 (auditd)
CGroup: /system.slice/auditd.service
`-250 /sbin/auditd -n
&lt;/code>&lt;/pre>&lt;p>To help improve security, the &lt;code>auditd&lt;/code> service can monitor file changes, system calls, executed commands, authentication events, and network access. After you implement an audit rule to monitor an event, the &lt;code>aureport&lt;/code> tool generates reports to display information about the events.&lt;/p>
&lt;p>You can use the auditctl utility to set a rule that monitors the &lt;code>sudoers&lt;/code> file for changes:&lt;/p>
&lt;pre>&lt;code>auditctl -w /etc/sudoers -p wa -k sudoers_changes
&lt;/code>&lt;/pre>
&lt;p>This rule specifies that the auditd service must watch (&lt;code>-w&lt;/code>) the &lt;code>/etc/sudoers&lt;/code> file to log permissions changes (&lt;code>-p&lt;/code>) to the write access (&lt;code>w&lt;/code>) or attributes (&lt;code>a&lt;/code>) of the file and to identify them in logs as &lt;code>sudoers_changes&lt;/code>. The auditing logs appear in &lt;code>/var/log/audit/audit.log&lt;/code>. You can list the auditing rules as follows:&lt;/p>
&lt;pre>&lt;code>auditctl -l
-w /etc/sudoers -p wa -k sudoers_changes
&lt;/code>&lt;/pre>
&lt;p>For more information on the Linux Audit Daemon, see the &lt;code>auditd&lt;/code> man page:&lt;/p>
&lt;pre>&lt;code>man auditd
&lt;/code>&lt;/pre>
&lt;p>For more information on setting auditing rules and options, see the &lt;code>auditctl&lt;/code> man page:&lt;/p>
&lt;pre>&lt;code>man auditctl
&lt;/code>&lt;/pre>
&lt;p>For more information on viewing reports on audited events, see the &lt;code>aureport&lt;/code> man page:&lt;/p>
&lt;pre>&lt;code>man aureport
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Analyzing systemd Logs with journalctl</title><link>/docs-v3/administration-guide/managing-services-withsystemd/analyzing-systemd-logs-with-journalctl/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/analyzing-systemd-logs-with-journalctl/</guid><description>
&lt;p>The &lt;code>journalctl&lt;/code> tool queries the contents of the &lt;code>systemd&lt;/code> journal.&lt;/p>
&lt;p>The following command displays the messages that &lt;code>systemd&lt;/code> generated the last time the machine started:&lt;/p>
&lt;pre>&lt;code>journalctl -b
&lt;/code>&lt;/pre>
&lt;p>The following command reveals the messages for the systemd service unit specified by the &lt;code>-u&lt;/code> option:&lt;/p>
&lt;pre>&lt;code>journalctl -u auditd
&lt;/code>&lt;/pre>
&lt;p>In the above example, &lt;code>auditd&lt;/code> is the system service unit.&lt;/p>
&lt;p>For more information, see the &lt;code>journalctl&lt;/code> man page by running the following command on Photon OS:&lt;/p>
&lt;pre>&lt;code>man journalctl
&lt;/code>&lt;/pre></description></item><item><title>Docs-V3: Migrating Scripts to systemd</title><link>/docs-v3/administration-guide/managing-services-withsystemd/migrating-scripts-to-systemd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs-v3/administration-guide/managing-services-withsystemd/migrating-scripts-to-systemd/</guid><description>
&lt;p>Although &lt;code>systemd&lt;/code> maintains compatibility with &lt;code>init.d&lt;/code> scripts, as a best practice, you must adapt the scripts that you want to run on Photon OS to &lt;code>systemd&lt;/code> to avoid potential problems.&lt;/p>
&lt;p>Such a conversion standardizes the scripts, reduces the footprint of your code, makes the scripts easier to read and maintain, and improves their robustness on a &lt;code>systemd&lt;/code> system.&lt;/p></description></item></channel></rss>